@model Codex.Models.ApplicationUser

<h2>Edit your profile!</h2>

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<form method="post" asp-action="Edit" asp-controller="Users">
    <input type="hidden" asp-for="Id" />

    <div class="form-group">
        <label asp-for="Name">Name:</label>
        <input asp-for="Name" type="text" class="form-control" value="@Model.Name" />
        @Html.ValidationMessageFor(m => m.Name, null, new { @class = "text-danger" })
    </div>

    <br />
    <div class="form-group">
        <label asp-for="ProfilePhoto">ProfilePhoto:</label>
        <input asp-for="ProfilePhoto" type="text" class="form-control" value="@Model.ProfilePhoto" />
        @Html.ValidationMessageFor(m => m.ProfilePhoto, null, new { @class = "text-danger" })
    </div>

    <br />
    <br />
    @*let the user select their favorite books they want to display*@
    @if (Model.FavoriteBooksOptions != null && Model.FavoriteBooksOptions.Any())
    {
        <h4>Select Your Favorite Books</h4>
        <div>
            @foreach (var bookOption in Model.FavoriteBooksOptions)
            {
                // check to see if the book had previously been added to the favorites
                bool wasSelected = (Model.FavoriteBooks != null)
                    && (Model.FavoriteBooks.Any(book => book.BookId.ToString() == bookOption.Value));

                if (wasSelected)
                {
                    <input type="checkbox" id="@bookOption.Value" value="@bookOption.Value" name="selectedFavoriteBooks" checked />
                }
                else
                {
                    <input type="checkbox" id="@bookOption.Value" value="@bookOption.Value" name="selectedFavoriteBooks" />
                }

                <label for="@bookOption.Value">@bookOption.Text</label>
                <br />
            }
        </div>
    }

    <br />
    <div class="form-group d-flex justify-content-between">
        <a class="btn btn-outline-secondary" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Advanced Settings</a>
        <button type="submit" class="btn btn-outline-secondary">Save Changes</button>
    </div>

</form>